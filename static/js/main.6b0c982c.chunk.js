(window["webpackJsonpmangawatch-app"]=window["webpackJsonpmangawatch-app"]||[]).push([[0],{126:function(e,t,a){e.exports=a.p+"static/media/nocover.4a631526.jpeg"},129:function(e,t,a){e.exports=a(281)},134:function(e,t,a){},135:function(e,t,a){},281:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(72),o=a.n(c),i=(a(134),a(48)),s=a(14),u=(a(135),a(29)),l=a(2),p=a(28),m=a(47),f=a(6),d=a(49),b=a.n(d),h=a(126),v=a.n(h);var O=function(e){var t=e.className,a=e.cover,n=void 0===a?v.a:a,c=e.chapters,o=void 0===c?0:c,i=e.chapters_read,s=void 0===i?0:i,u=e.title,l=void 0===u?"MISSING TITLE":u,p=e._key,m=s>0,f="".concat(s," / ").concat(o),d="".concat(o," Chapters");return r.a.createElement("li",{key:p,className:"".concat(b.a.cover," ").concat(t)},r.a.createElement("div",{className:b.a.text},r.a.createElement("p",null,l),r.a.createElement("p",null,m?f:d)),r.a.createElement("img",{src:n,alt:"",draggable:!1,className:b.a.image}))};var j=function(e){var t=e.chapters_read,a=e.basepath,n=void 0===a?"/media/":a,c=e._key,o=e.id,s=Object(f.a)(e,["chapters_read","basepath","_key","id"]),u=n+o;return r.a.createElement(i.b,{to:u,key:c},r.a.createElement(O,Object.assign({chapters_read:t,id:o},s)))};function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var E=function(e){var t=e.media,a=void 0===t?[]:t,c=Object(n.useMemo)(function(){return a.map(function(e){return j(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(a,!0).forEach(function(t){Object(m.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({chapters_read:e.chaptersread,_key:e.id},e))})},[a]);return r.a.createElement("ul",{className:"media-grid"},c)},y=a(4),w=a.n(y),_=a(11),x=a(3),N=Object(x.object)().shape({title:Object(x.object)().shape({$t:Object(x.string)()})}),k=Object(x.object)().shape({feed:Object(x.object)().shape({title:Object(x.object)().shape({$t:Object(x.string)()}),updated:Object(x.object)().shape({$t:Object(x.date)()}),entry:Object(x.array)().of(N)})});function P(e,t){return"https://spreadsheets.google.com/feeds/list/".concat(e,"/").concat(t,"/public/values?alt=json")}function I(e,t){return C.apply(this,arguments)}function C(){return(C=Object(_.a)(w.a.mark(function e(t,a){var n,r,c;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=P(t,a),e.prev=1,e.next=4,fetch(n);case 4:return r=e.sent,e.next=7,r.json();case 7:return c=e.sent,e.abrupt("return",k.cast(c));case 11:throw e.prev=11,e.t0=e.catch(1),e.t0.message+="Failed to fetch sheet:",e.t0.doc_id=t,e.t0.sheet_number=a,e.t0;case 17:case"end":return e.stop()}},e,null,[[1,11]])}))).apply(this,arguments)}function M(e){var t=e.feed.entry.map(function(e){return function(e,t){var a={};return Object.keys(e).forEach(function(n){if(0===n.indexOf(t)){var r=n.substr(t.length);a[r]=e[n].$t}}),a}(e,"gsx$")});return{title:e.feed.title.$t,updated:e.feed.updated.$t,data:t}}function S(e,t){return D.apply(this,arguments)}function D(){return(D=Object(_.a)(w.a.mark(function e(t,a){var n,r;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t,a);case 2:return n=e.sent,r=M(n),e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var $=x.object().shape({id:x.string(),title:x.string().notRequired(),chapters:x.number().integer().notRequired(),cover:x.string().url().notRequired()});x.object().shape({id:x.string(),chaptersread:x.number().integer().notRequired().default(0)});function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var T="1h64ICq9bDipGdd8Wz_ZvdPrnh3CAOTixMrZINzUsTiY";function G(){return V.apply(this,arguments)}function V(){return(V=Object(_.a)(w.a.mark(function e(){var t,a,n;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(T,1);case 2:return t=e.sent,a=t.data,n=function(e){try{return $.cast(e)}catch(t){}return e},e.abrupt("return",a.map(n).filter(U).filter(W));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function q(){return L.apply(this,arguments)}function L(){return(L=Object(_.a)(w.a.mark(function e(){var t,a;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(T,2);case 2:return t=e.sent,a=t.data,e.abrupt("return",a.filter(U).filter(W));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function R(){return(R=Object(_.a)(w.a.mark(function e(){var t,a,n,r,c,o;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([G(),q()]);case 2:return t=e.sent,a=Object(u.a)(t,2),n=a[0],r=a[1],c=new Map(n.map(function(e){return[e.id,e]})),o=new Map(r.map(function(e){return[e.id,e]})),e.abrupt("return",A(c,o));case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function A(e,t){var a=new Map;return e.forEach(function(e){a.set(e.id,e)}),t.forEach(function(t){var n=e.get(t.id);n&&a.set(t.id,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(a,!0).forEach(function(t){Object(m.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},n,{},t))}),Array.from(a.values())}function U(e){return Boolean(e)}var W=function(e){return Boolean(e.id)},H=a(75),J=a.n(H);var z=function(e){var t=e.className,a=Object(f.a)(e,["className"]);return console.log("load"),r.a.createElement("div",Object.assign({className:"".concat(J.a.container," ").concat(t||"")},a),r.a.createElement("h1",{className:J.a.text},"Loading..."))},Q=function(e){var t=Object(l.a)({},e),a=Object(p.useGlobal)("medias"),c=Object(u.a)(a,2),o=c[0],i=c[1];Object(n.useEffect)(function(){(function(){return R.apply(this,arguments)})().then(function(e){i(e)}).catch(function(e){console.error("Could not get media list: ",e)})},[i]);var s=r.a.createElement(E,Object.assign({media:o},t)),m=r.a.createElement(z,null);return o?s:m};var Y=function(){return r.a.createElement(Q,null)},Z=a(30),F=a.n(Z);var X=function(e){var t=e.max,a=e.onSubmit,c=e.onChange,o=e.defaultValue,i=void 0===o?0:o,s=Object(f.a)(e,["max","onSubmit","onChange","defaultValue"]),u=Object(n.useRef)(null),l=Object(n.useCallback)(function(e){e.preventDefault(),e.stopPropagation();var t=u.current?Number.parseInt(u.current.value):0;a&&a(t)},[a]),p=Object(n.useCallback)(function(e){e.stopPropagation();var t=u.current?Number.parseInt(u.current.value):0;c&&c(t)},[c]),m=Object(n.useMemo)(function(){return i.toString()},[i]);return r.a.createElement("form",Object.assign({onSubmit:l},s),r.a.createElement("input",{type:"number",max:t,min:0,onChange:p,defaultValue:m,ref:u}))};var K=function(e){var t=e.className,a=e.media,n=Object(f.a)(e,["className","media"]);return r.a.createElement("div",Object.assign({className:"".concat(F.a.container," ").concat(t)},n),r.a.createElement("h1",null,a&&a.title||"Title"),r.a.createElement("h2",null,"Author"),r.a.createElement("div",{className:F.a.grid},r.a.createElement(O,Object.assign({className:F.a.cover},a)),r.a.createElement("ul",{className:F.a.infoGrid},r.a.createElement("h2",null,"Genre: Action"),r.a.createElement("h2",null,"Doot")),r.a.createElement(X,{className:F.a.bottom,max:a&&a.chapters,defaultValue:a&&a.chaptersread})))};function ee(e){var t=e.match,a=(e.staticContext,Object(f.a)(e,["match","staticContext"])),n=Object(p.useGlobal)("medias"),c=Object(u.a)(n,1)[0],o=c&&c.find(function(e){return e.id===t.params.id});return o?r.a.createElement(K,Object.assign({media:o},a)):r.a.createElement("h1",null,"Nope! Not found")}var te=function(e){var t=e.className,a=void 0===t?"":t,n=e.header,c=e.children,o=Object(f.a)(e,["className","header","children"]);return r.a.createElement("div",Object.assign({className:"main-layout ".concat(a)},o),n,r.a.createElement("div",{className:"main-content"},c))};var ae=function(){return r.a.createElement("header",{className:"mw-header"},r.a.createElement("h1",{className:"title"},"MangaWatch"),r.a.createElement("div",{className:"nav"},r.a.createElement("h2",null,"User"),r.a.createElement("h2",null,"Settings")))};var ne=function(){return r.a.createElement(te,{header:r.a.createElement(ae,null),className:"app"},r.a.createElement(i.a,{basename:"/mediawatch"},r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/",name:"Mangawatch",component:Y}),r.a.createElement(s.a,{path:"/list"}),r.a.createElement(s.a,{path:"/user"}),r.a.createElement(s.a,{path:"/media/:id",component:ee}),r.a.createElement(s.a,{path:"",component:function(){return r.a.createElement("h1",null,"404")}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var re=Object(p.createProvider)({});o.a.render(r.a.createElement(re,null,r.a.createElement(ne,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},30:function(e,t,a){e.exports={mediaInfo:"MediaInfo_mediaInfo__1eLkQ",grid:"MediaInfo_grid__2IgHV",contentTop:"MediaInfo_contentTop__3VkXo",contentBottom:"MediaInfo_contentBottom__2Q5kY",cover:"MediaInfo_cover__1ltHJ"}},49:function(e,t,a){e.exports={cover:"Cover_cover__2OrmH",text:"Cover_text__2IwmS",image:"Cover_image__3_lUE"}},75:function(e,t,a){e.exports={container:"Loading_container__1psUk",text:"Loading_text__Bcsf8"}}},[[129,1,2]]]);
//# sourceMappingURL=main.6b0c982c.chunk.js.map
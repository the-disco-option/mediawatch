(window["webpackJsonpmangawatch-app"]=window["webpackJsonpmangawatch-app"]||[]).push([[0],{109:function(e,t,a){e.exports=a.p+"static/media/nocover.4a631526.jpeg"},112:function(e,t,a){e.exports=a(251)},117:function(e,t,a){},118:function(e,t,a){},251:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(107),o=a.n(c),i=(a(117),a(41)),s=a(14),u=(a(118),a(30)),l=a(2),p=a(108),m=a(12),d=a(42),f=a.n(d),h=a(109),b=a.n(h);var v=function(e){var t=e.cover,a=void 0===t?b.a:t,n=e.chapters,c=void 0===n?0:n,o=e.chapters_read,i=void 0===o?0:o,s=e.title,u=void 0===s?"MISSING TITLE":s,l=e._key,p=i>0,m="".concat(i," / ").concat(c),d="".concat(c," Chapters");return r.a.createElement("li",{key:l,className:f.a.cover},r.a.createElement("div",{className:f.a.text},r.a.createElement("p",null,u),r.a.createElement("p",null,p?m:d)),r.a.createElement("img",{src:a,alt:"",draggable:!1,className:f.a.image}))};var j=function(e){var t=e.chapters_read,a=e.item,n=e.basepath,c=void 0===n?"/media/":n,o=e._key,s=Object(m.a)(e,["chapters_read","item","basepath","_key"]),u=c+(a?a.id:"");return r.a.createElement(i.b,{to:u,key:o},r.a.createElement(v,Object.assign({chapters_read:t},s)))};function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var g=function(e){var t=e.media,a=void 0===t?[]:t,c=Object(n.useMemo)(function(){return a.map(function(e){var t=e.media,a=e.user;return j(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(a,!0).forEach(function(t){Object(p.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({chapters_read:a&&a.chaptersread,_key:t.id},t))})},[a]);return r.a.createElement("ul",{className:"media-grid"},c)},E=a(4),w=a.n(E),y=a(10),_=a(3),x=Object(_.object)().shape({title:Object(_.object)().shape({$t:Object(_.string)()})}),k=Object(_.object)().shape({feed:Object(_.object)().shape({title:Object(_.object)().shape({$t:Object(_.string)()}),updated:Object(_.object)().shape({$t:Object(_.date)()}),entry:Object(_.array)().of(x)})});function N(e,t){return"https://spreadsheets.google.com/feeds/list/".concat(e,"/").concat(t,"/public/values?alt=json")}function P(e,t){return M.apply(this,arguments)}function M(){return(M=Object(y.a)(w.a.mark(function e(t,a){var n,r,c;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=N(t,a),e.prev=1,e.next=4,fetch(n);case 4:return r=e.sent,e.next=7,r.json();case 7:return c=e.sent,e.abrupt("return",k.cast(c));case 11:throw e.prev=11,e.t0=e.catch(1),e.t0.message+="Failed to fetch sheet:",e.t0.doc_id=t,e.t0.sheet_number=a,e.t0;case 17:case"end":return e.stop()}},e,null,[[1,11]])}))).apply(this,arguments)}function S(e){var t=e.feed.entry.map(function(e){return function(e,t){var a={};return Object.keys(e).forEach(function(n){if(0===n.indexOf(t)){var r=n.substr(t.length);a[r]=e[n].$t}}),a}(e,"gsx$")});return{title:e.feed.title.$t,updated:e.feed.updated.$t,data:t}}function $(e,t){return C.apply(this,arguments)}function C(){return(C=Object(y.a)(w.a.mark(function e(t,a){var n,r;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t,a);case 2:return n=e.sent,r=S(n),e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var I=_.object().shape({id:_.string(),title:_.string().notRequired(),chapters:_.number().integer().notRequired(),cover:_.string().url().notRequired()}),q=(_.object().shape({id:_.string(),chaptersread:_.number().integer().notRequired().default(0)}),"1h64ICq9bDipGdd8Wz_ZvdPrnh3CAOTixMrZINzUsTiY");function B(){return D.apply(this,arguments)}function D(){return(D=Object(y.a)(w.a.mark(function e(){var t,a,n;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(q,1);case 2:return t=e.sent,a=t.data,n=function(e){try{return I.cast(e)}catch(t){}return e},e.abrupt("return",a.map(n).filter(W).filter(z));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function L(){return R.apply(this,arguments)}function R(){return(R=Object(y.a)(w.a.mark(function e(){var t,a;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(q,2);case 2:return t=e.sent,a=t.data,e.abrupt("return",a.filter(W).filter(z));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function T(){return(T=Object(y.a)(w.a.mark(function e(){var t,a,n,r,c,o;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([B(),L()]);case 2:return t=e.sent,a=Object(u.a)(t,2),n=a[0],r=a[1],c=new Map(n.map(function(e){return[e.id,e]})),o=new Map(r.map(function(e){return[e.id,e]})),e.abrupt("return",U(c,o));case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function U(e,t){var a=new Map;return e.forEach(function(e){a.set(e.id,{media:e})}),t.forEach(function(t){var n=e.get(t.id);n&&a.set(t.id,{media:n,user:t})}),Array.from(a.values())}function W(e){return Boolean(e)}var z=function(e){return Boolean(e.id)},A=a(63),G=a.n(A);var J=function(e){var t=e.className,a=Object(m.a)(e,["className"]);return console.log("load"),r.a.createElement("div",Object.assign({className:"".concat(G.a.container," ").concat(t||"")},a),r.a.createElement("h1",{className:G.a.text},"Loading..."))},Z=function(e){var t=Object(l.a)({},e),a=Object(n.useState)([]),c=Object(u.a)(a,2),o=c[0],i=c[1],s=Object(n.useState)(!1),p=Object(u.a)(s,2),m=p[0],d=p[1];console.log("render"),Object(n.useEffect)(function(){d(!0),function(){return T.apply(this,arguments)}().then(function(e){i(e),d(!1)}).catch(function(e){console.error("Could not get media list: ",e)})},[]);var f=r.a.createElement(g,Object.assign({media:o},t)),h=r.a.createElement(J,null);return m?h:f};var F=function(){return r.a.createElement(Z,null)};function H(e){var t=e.media;return r.a.createElement("h1",null,t&&t.id)}function Y(e){var t=e.match,a=Object(m.a)(e,["match"]),n={id:t.params.id,chapters:10,cover:"",title:""};return r.a.createElement(H,Object.assign({media:n},a))}var K=function(e){var t=e.className,a=void 0===t?"":t,n=e.header,c=e.children,o=Object(m.a)(e,["className","header","children"]);return r.a.createElement("div",Object.assign({className:"main-layout ".concat(a)},o),n,r.a.createElement("div",{className:"main-content"},c))};var Q=function(){return r.a.createElement("header",{className:"mw-header"},r.a.createElement("h1",{className:"title"},"MangaWatch"),r.a.createElement("div",{className:"nav"},r.a.createElement("h2",null,"User"),r.a.createElement("h2",null,"Settings")))};var V=function(){return r.a.createElement(K,{header:r.a.createElement(Q,null),className:"app"},r.a.createElement(i.a,{basename:"/mediawatch"},r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/",name:"Mangawatch",component:F}),r.a.createElement(s.a,{path:"/list"}),r.a.createElement(s.a,{path:"/user"}),r.a.createElement(s.a,{path:"/media/:id",component:Y}),r.a.createElement(s.a,{path:"",component:function(){return r.a.createElement("h1",null,"404")}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},42:function(e,t,a){e.exports={cover:"Cover_cover__2OrmH",text:"Cover_text__2IwmS",image:"Cover_image__3_lUE"}},63:function(e,t,a){e.exports={container:"Loading_container__1psUk",text:"Loading_text__Bcsf8"}}},[[112,1,2]]]);
//# sourceMappingURL=main.816dcc0e.chunk.js.map